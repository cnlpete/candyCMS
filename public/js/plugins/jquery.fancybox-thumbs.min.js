/*!
 * Thumbnail helper for fancyBox
 * version: 1.0.2
 * @requires fancyBox v2.0 or later
 *
 * Usage: 
 *     $(".fancybox").fancybox({
 *         thumbs: {
 *             width	: 50,
 *             height	: 50
 *         }
 *     });
 * 
 * Options:
 *     width - thumbnail width
 *     height - thumbnail height
 *     source - function to obtain the URL of the thumbnail image
 *     position - 'top' or 'bottom'
 * 
 */
(function(b){var a=b.fancybox;a.helpers.thumbs={wrap:null,list:null,width:0,source:function(d){var c=b(d).find("img");return c.length?c.attr("src"):d.href},init:function(f){var e=this,g,c=f.width||50,h=f.height||50,d=f.source||this.source;g="";for(var i=0;i<a.group.length;i++){g+='<li><a style="width:'+c+"px;height:"+h+'px;" href="javascript:jQuery.fancybox.jumpto('+i+');"></a></li>'}this.wrap=b('<div id="fancybox-thumbs"></div>').addClass(f.position||"bottom").appendTo("body");this.list=b("<ul>"+g+"</ul>").appendTo(this.wrap);b.each(a.group,function(j){b("<img />").load(function(){var o=this.width,k=this.height,n,l,m;if(!e.list||!o||!k){return}n=o/c;l=k/h;m=e.list.children().eq(j).find("a");if(n>=1&&l>=1){if(n>l){o=Math.floor(o/l);k=h}else{o=c;k=Math.floor(k/n)}}b(this).css({width:o,height:k,top:Math.floor(h/2-k/2),left:Math.floor(c/2-o/2)});m.width(c).height(h);b(this).hide().appendTo(m).fadeIn(300)}).attr("src",d(this))});this.width=this.list.children().eq(0).outerWidth();this.list.width(this.width*(a.group.length+1)).css("left",Math.floor(b(window).width()*0.5-(a.current.index*this.width+this.width*0.5)))},update:function(c){if(this.list){this.list.stop(true).animate({left:Math.floor(b(window).width()*0.5-(a.current.index*this.width+this.width*0.5))},150)}},beforeLoad:function(c){if(a.group.length<2){a.coming.helpers.thumbs=false;return}a.coming.margin[c.position==="top"?0:2]=c.height+30},afterShow:function(c){if(this.list){this.update(c)}else{this.init(c)}this.list.children().removeClass("active").eq(a.current.index).addClass("active")},onUpdate:function(){this.update()},beforeClose:function(){if(this.wrap){this.wrap.remove()}this.wrap=null;this.list=null;this.width=0}}}(jQuery));